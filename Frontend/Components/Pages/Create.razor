@page "/create"
@rendermode InteractiveServer

<PageTitle>Create</PageTitle>

<div>
    @foreach (var question in Questions)
    {
        <div>
            <h5>Question @((Questions.IndexOf(question) + 1))</h5>

            <input type="text" placeholder="Enter question" @bind="question.QuestionText"> <br> <br>

            <div class="answer-option">
                <input type="radio" name="answer-@question.Id" value="option1" checked="@IsChecked(question.SelectedAnswer, "option1")" @onclick='() =>question.SelectedAnswer = "option1" ' />
                <input type="text" placeholder="Enter answer 1" @bind="question.Answer1" />


                <input type="radio" name="answer-@question.Id" value="option2" checked="@IsChecked(question.SelectedAnswer, "option2")" @onclick='() => question.SelectedAnswer = "option2" ' />
                <input type="text" placeholder="Enter answer2" @bind="question.Answer2" />

                <input type="radio" name="answer-@question.Id" value="option3" checked="@IsChecked(question.SelectedAnswer, "option3")" @onclick='() => question.SelectedAnswer = "option3"' />
                <input type="text" placeholder="Enter answer 3" @bind="question.Answer3" />

            </div>

            <button class="btn btn-secondary" @onclick="() => ShowAnswerInCard(question)"> Show question & Answer</button>
        </div>
        <hr>
    }
</div>


 <br>



<button class="btn btn-primary" @onclick="AddNewQuestion">Add New Question</button>


@if (SelectedQuestion !=null)
{
    <div class="card" style="width: 18rem;">
        <div class="card-body">
            <h5 class="card-body">
                <h5 class="card-title">@SelectedQuestion.QuestionText</h5>
                <p class="card-text">
                    @if (SelectedQuestion.SelectedAnswer == "option1") {@SelectedQuestion.Answer1}
                    else if (SelectedQuestion.SelectedAnswer == "option2") {@SelectedQuestion.Answer2}
                    else if (SelectedQuestion.SelectedAnswer == "option3") {@SelectedQuestion.Answer3}
                    else { <i>No answer selected</i>}
                </p>
            </h5>
        </div>
    </div>
}


@code {
    public class QuestionModel
    {
        public int Id { get; set; }
        public string QuestionText { get; set; }
        public string Answer1 { get; set; }
        public string Answer2 { get; set; }
        public string Answer3 { get; set; }
        public string SelectedAnswer { get; set; }
    }

    private int nextQuestionId = 1;
    private List<QuestionModel> Questions = new List<QuestionModel>();
    private QuestionModel SelectedQuestion;

    private void AddNewQuestion()
    {
        Questions.Add(new QuestionModel { Id = nextQuestionId++ });
    }

    private void ShowAnswerInCard(QuestionModel question)
    {
        SelectedQuestion = question;
    }

    private bool IsChecked(string selectedAnswer, string option)
    {
        return selectedAnswer == option;
    }

}